//defines pins numbers
const int stepPin = 3; 
const int dirPin = 4; 
const int stepPin2 = 5;
const int dirPin2 = 6;

const float WHEEL_DIAMETER = 88.0; // mm
const float WHEEL_CIRCUMFERENCE = 3.14159 * WHEEL_DIAMETER; // ~276.46 mm
const int STEPS_PER_REV = 200;

// Calculate steps for movements
int stepsForDistance(float distance_mm) {
  return (int)((distance_mm / WHEEL_CIRCUMFERENCE) * STEPS_PER_REV);
}

void setup() {
  pinMode(stepPin, OUTPUT); 
  pinMode(dirPin, OUTPUT);
  pinMode(stepPin2, OUTPUT); 
  pinMode(dirPin2, OUTPUT);
}

void move_distance_forward(float distance_mm) {
int steps = stepsForDistance(distance_mm);

  digitalWrite(dirPin, HIGH);
  digitalWrite(dirPin2, HIGH);
  // 200 is a full turn of the stepper motor
  // Both motors step together in the same loop
  for(int x = 0; x < steps; x++) {
    digitalWrite(stepPin, HIGH);
    digitalWrite(stepPin2, HIGH);
    delayMicroseconds(500); 
    digitalWrite(stepPin, LOW);
    digitalWrite(stepPin2, LOW);
    delayMicroseconds(500); 
  }
  delay(1000);
}


void move_distance_backward(float distance_mm) {
  int steps = stepsForDistance(distance_mm);
  
  digitalWrite(dirPin, LOW);
  digitalWrite(dirPin2, LOW);
  
  for(int x = 0; x < steps; x++) {
    digitalWrite(stepPin, HIGH);
    digitalWrite(stepPin2, HIGH);
    delayMicroseconds(500); 
    digitalWrite(stepPin, LOW);
    digitalWrite(stepPin2, LOW);
    delayMicroseconds(500); 
  }
  delay(100);
}


void turn_90_Left() {
  digitalWrite(dirPin, LOW);   // Motor 1 backward
  digitalWrite(dirPin2, HIGH); // Motor 2 forward
  
  for(int x = 0; x < 200; x++) {
    digitalWrite(stepPin, HIGH);
    digitalWrite(stepPin2, HIGH);
    delayMicroseconds(500); 
    digitalWrite(stepPin, LOW);
    digitalWrite(stepPin2, LOW);
    delayMicroseconds(500); 
  }
  delay(1000);
}
#
void turn_90_Right() {
  digitalWrite(dirPin, HIGH);  // Motor 1 forward
  digitalWrite(dirPin2, LOW);  // Motor 2 backward
  
  for(int x = 0; x < 200; x++) {
    digitalWrite(stepPin, HIGH);
    digitalWrite(stepPin2, HIGH);
    delayMicroseconds(500); 
    digitalWrite(stepPin, LOW);
    digitalWrite(stepPin2, LOW);
    delayMicroseconds(500); 
  }
  delay(1000);
}

void turn_90_left() {
  digitalWrite(dirPin, LOW);   // Left motor backward
  digitalWrite(dirPin2, HIGH); // Right motor forward
  
  // Adjust this value based on your wheel base width
  for(int x = 0; x < 200; x++) {
    digitalWrite(stepPin, HIGH);
    digitalWrite(stepPin2, HIGH);
    delayMicroseconds(500); 
    digitalWrite(stepPin, LOW);
    digitalWrite(stepPin2, LOW);
    delayMicroseconds(500); 
  }
  delay(100);
}

void turn_180_left() {
  digitalWrite(dirPin, LOW);
  digitalWrite(dirPin2, HIGH);
  
  // Double the steps for 180 degrees
  for(int x = 0; x < 400; x++) {
    digitalWrite(stepPin, HIGH);
    digitalWrite(stepPin2, HIGH);
    delayMicroseconds(500); 
    digitalWrite(stepPin, LOW);
    digitalWrite(stepPin2, LOW);
    delayMicroseconds(500); 
  }
  delay(100);
}

void turn_180_right() {
  digitalWrite(dirPin, HIGH);
  digitalWrite(dirPin2, LOW);
  
  for(int x = 0; x < 400; x++) {
    digitalWrite(stepPin, HIGH);
    digitalWrite(stepPin2, HIGH);
    delayMicroseconds(500); 
    digitalWrite(stepPin, LOW);
    digitalWrite(stepPin2, LOW);
    delayMicroseconds(500); 
  }
  delay(100);
}

void loop() {
  move_distance_forward(100);
  delay(1000);
}
